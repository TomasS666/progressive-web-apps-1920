<!DOCTYPE html>
<html lang="en">

<%- include("components/head.ejs"); -%>

<body>
    <%- include('components/header.ejs') %>
    <main id="content">
        <% if(trailers != "undefined" && trailers.length){ 
            if('key' in trailers[0] == true){
            %>
        <iframe title="Trailer video" width="" height="" src="https://www.youtube.com/embed/<%= trailers[0].key%>">
        </iframe>
        <% }} %>

        <section class="detail-section">
            <button class="share">Share!</button>
            <article title="<%= movie.title %>">
                <header>
                    <h1><%= movie.title %></h1>
                </header>
                <figure>
                    <img src="<%= movie.poster_path %>" alt="<%= movie.title %>">
                    <figcaption>
                        <div>Genres: <%= movie.genres %> </div>
                        <p><%= movie.overview %></p>
                    </figcaption>
                </figure>
            </article>
           
            <div class="result"></div>

        </section>
        <!-- <a href="#movie/<%=movie.id%>">
                    <article>
                        <h3><%= movie.title %></h3>
                        <img src="https://image.tmdb.org/t/p/w342/<%= movie.poster_path %>" alt="<%= movie.title %>">
                        <div data-ui="rating"><%= movie.vote_average %></div>
                    </article>
                </a> -->




<script>
 
    // const shareData = {
    //     title: 'MDN',
    //     url: 'https://pwa-tomas.herokuapp.com/movie/454626/sonic-the-hedgehog',
    //   }
      
      const btn = document.querySelector('button.share');
      const resultPara = document.querySelector('.result');

      btn.addEventListener('click', () => {
        const title = window.document.title;
        const url = window.document.location.href;

        if(navigator.share){
            navigator.share({title: `${title}`, url: `${url}`}).then(() => {
                console.log('nice');
            })
        }
        else{
            //fallback share
            console.log('geen support web api share');
        }

        // navigator.share(shareData)
        //   .then(() =>
        //     resultPara.textContent = 'MDN shared successfully'
        //   )
        //   .catch((e) =>
        //     resultPara.textContent = 'Error: ' + e
        //   )
      });
    
</script>



    </main>
    <footer>
        <p>This product uses the TMDb API but is not endorsed or certified by TMDb.</p> <img
            src="/images/the-movie-db-logo.cb5571ba.png" alt="">
    </footer>
    
</body>

</html>